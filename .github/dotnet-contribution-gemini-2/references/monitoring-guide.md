# 監控與可觀測性指引

本文件概述了專案的健康檢查、分散式追蹤、度量收集與日誌聚合策略。

## 健康檢查 (Health Checks)

#### 多層健康檢查架構
- **自我檢查**: API 服務本身狀態
- **資料庫檢查**: SQL Server 連線與查詢
- **快取檢查**: Redis 連線狀態
- **外部服務檢查**: 第三方 API 可用性

端點：
- `/health` - 完整健康檢查
- `/health/ready` - 就緒檢查（資料庫、快取）
- `/health/live` - 存活檢查（API 服務）

## OpenTelemetry 整合

#### 分散式追蹤設定
支援 Jaeger、Prometheus 等監控系統整合，提供分散式追蹤能力。

## 效能計數器與度量

#### 自訂度量收集
收集業務指標（如會員建立數、登入次數）與效能指標（如操作持續時間）。

## 日誌聚合與分析

#### Seq 結構化日誌設定
使用 Serilog 輸出結構化日誌到 Seq，支援日誌查詢與分析。

#### 集中式日誌策略
**核心原則**: 日誌記錄集中在 Middleware 層，業務邏輯層不記錄錯誤日誌，只回傳 Failure。
