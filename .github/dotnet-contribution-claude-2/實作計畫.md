# GitHub Copilot Skills & Agents 實作計畫

## 目標
根據 CLAUDE.md 檔案內容，建立一套完整的 GitHub Copilot skill 和 Agent 系統，協助開發者遵循專案規範進行開發。

## 設計原則
1. **Skill 職責單一** - 每個 skill 專注於單一功能領域
2. **模組化參考** - 使用 references 資料夾存放參考文件
3. **範本驅動** - 使用 assets 資料夾存放程式碼範本
4. **互動式流程** - Agent 能與用戶互動，確認選項後執行

## 專案結構
```
.github/dotnet-contribution-claude-2/
├── skills/              # Skill 定義檔案
├── agents/              # Agent 定義檔案
├── references/          # 被 skill 參考的文件
└── assets/              # 程式碼範本檔案
```

---

## 實作步驟

### 階段一：建立參考文件（References）

#### ✅ 步驟 1: 建立架構設計參考文件
- **檔案**: `references/architecture.md`
- **目的**: 說明分層架構（Controller → Handler → Repository）設計原則
- **理由**: 提供 skill 參考，確保開發者理解分層職責

#### ✅ 步驟 2: 建立 Result Pattern 參考文件
- **檔案**: `references/result-pattern.md`
- **目的**: 說明錯誤處理的 Result Pattern 使用方式
- **理由**: 統一錯誤處理標準，避免拋出業務例外

#### ✅ 步驟 3: 建立 BDD 測試參考文件
- **檔案**: `references/bdd-testing.md`
- **目的**: 說明 BDD 測試流程與 Gherkin 語法
- **理由**: 指導開發者撰寫符合規範的 BDD 測試

#### ✅ 步驟 4: 建立 EF Core 最佳實踐參考文件
- **檔案**: `references/ef-core-best-practices.md`
- **目的**: 說明 EF Core 使用規範（DbContextFactory、AsNoTracking 等）
- **理由**: 確保資料存取效能與正確性

#### ✅ 步驟 5: 建立中介軟體參考文件
- **檔案**: `references/middleware-design.md`
- **目的**: 說明中介軟體管線設計與職責分離
- **理由**: 確保中介軟體正確實作與順序

#### ✅ 步驟 6: 建立 Repository 設計哲學參考文件
- **檔案**: `references/repository-design-philosophy.md`
- **目的**: 說明資料表導向 vs 需求導向的設計策略
- **理由**: 協助開發者做出正確的 Repository 設計決策

---

### 階段二：建立程式碼範本（Assets）

#### ✅ 步驟 7: 建立 Controller 範本
- **檔案**: `assets/controller-template.cs`
- **目的**: 提供標準的 Controller 實作範本
- **理由**: 確保 Controller 遵循專案規範（Result Pattern 轉換、錯誤處理）

#### ✅ 步驟 8: 建立 Handler 範本
- **檔案**: `assets/handler-template.cs`
- **目的**: 提供標準的 Handler 實作範本
- **理由**: 確保業務邏輯層正確使用 Result Pattern

#### ✅ 步驟 9: 建立 Repository 範本
- **檔案**: `assets/repository-template.cs`
- **目的**: 提供標準的 Repository 實作範本
- **理由**: 確保資料存取層使用 DbContextFactory 與非同步模式

#### ✅ 步驟 10: 建立 BDD Feature 範本
- **檔案**: `assets/bdd-feature-template.feature`
- **目的**: 提供標準的 Gherkin 情境範本
- **理由**: 加速 BDD 測試情境撰寫

#### ✅ 步驟 11: 建立 BDD Steps 範本
- **檔案**: `assets/bdd-steps-template.cs`
- **目的**: 提供標準的 BDD 測試步驟實作範本
- **理由**: 確保測試步驟使用 WebApplicationFactory 與 Docker 環境

#### ✅ 步驟 12: 建立 Middleware 範本
- **檔案**: `assets/middleware-template.cs`
- **目的**: 提供標準的中介軟體實作範本
- **理由**: 確保中介軟體遵循職責分離原則

---

### 階段三：建立核心 Skills

#### ✅ 步驟 13: 建立專案初始化 Skill
- **檔案**: `skills/project-init.md`
- **職責**: 檢測專案狀態、引導初始化配置
- **參考**: `references/architecture.md`
- **理由**: 確保新專案或空白專案能正確初始化

#### ✅ 步驟 14: 建立 API 設計 Skill
- **檔案**: `skills/api-design.md`
- **職責**: 協助設計 OpenAPI 規格、產生程式碼
- **參考**: `references/architecture.md`
- **理由**: 實現 API First 開發流程

#### ✅ 步驟 15: 建立 Controller 產生 Skill
- **檔案**: `skills/controller-gen.md`
- **職責**: 產生符合規範的 Controller 程式碼
- **參考**: `references/architecture.md`, `references/result-pattern.md`
- **範本**: `assets/controller-template.cs`
- **理由**: 確保 Controller 層正確實作

#### ✅ 步驟 16: 建立 Handler 產生 Skill
- **檔案**: `skills/handler-gen.md`
- **職責**: 產生符合規範的 Handler 業務邏輯
- **參考**: `references/result-pattern.md`
- **範本**: `assets/handler-template.cs`
- **理由**: 確保業務邏輯層正確實作

#### ✅ 步驟 17: 建立 Repository 產生 Skill
- **檔案**: `skills/repository-gen.md`
- **職責**: 產生符合規範的 Repository 資料存取
- **參考**: `references/ef-core-best-practices.md`, `references/repository-design-philosophy.md`
- **範本**: `assets/repository-template.cs`
- **理由**: 確保資料存取層正確實作

#### ✅ 步驟 18: 建立 BDD 測試 Skill
- **檔案**: `skills/bdd-test.md`
- **職責**: 協助撰寫 BDD 測試情境與實作
- **參考**: `references/bdd-testing.md`
- **範本**: `assets/bdd-feature-template.feature`, `assets/bdd-steps-template.cs`
- **理由**: 確保測試符合 BDD 規範

#### ✅ 步驟 19: 建立錯誤處理 Skill
- **檔案**: `skills/error-handling.md`
- **職責**: 協助實作 Result Pattern 錯誤處理
- **參考**: `references/result-pattern.md`
- **理由**: 統一錯誤處理方式

#### ✅ 步驟 20: 建立中介軟體 Skill
- **檔案**: `skills/middleware.md`
- **職責**: 協助實作中介軟體
- **參考**: `references/middleware-design.md`
- **範本**: `assets/middleware-template.cs`
- **理由**: 確保中介軟體正確實作

#### ✅ 步驟 21: 建立 EF Migration Skill
- **檔案**: `skills/ef-migration.md`
- **職責**: 協助管理 EF Core Migration
- **參考**: `references/ef-core-best-practices.md`
- **理由**: 確保資料庫變更正確執行

---

### 階段四：建立核心 Agents

#### ✅ 步驟 22: 建立功能開發 Agent
- **檔案**: `agents/feature-development.md`
- **職責**: 編排完整的功能開發流程
- **使用 Skills**:
  - `api-design` → 設計 API
  - `controller-gen` → 產生 Controller
  - `handler-gen` → 產生 Handler
  - `repository-gen` → 產生 Repository
  - `bdd-test` → 產生測試
- **互動點**:
  1. 詢問 API 開發流程（API First vs Code First）
  2. 詢問測試策略（BDD/單元測試/暫不實作）
  3. 詢問需要實作的分層
- **理由**: 提供端到端的功能開發自動化流程

#### ✅ 步驟 23: 建立專案初始化 Agent
- **檔案**: `agents/project-setup.md`
- **職責**: 引導專案初始化流程
- **使用 Skills**: `project-init`
- **互動點**:
  1. 是否使用 GitHub 範本
  2. 資料庫類型選擇
  3. 快取設定（Redis）
  4. 專案結構（單一專案 vs 多專案）
- **理由**: 確保新專案正確初始化

#### ✅ 步驟 24: 建立測試策略 Agent
- **檔案**: `agents/testing-strategy.md`
- **職責**: 引導測試實作流程
- **使用 Skills**: `bdd-test`
- **互動點**:
  1. 測試類型選擇
  2. 測試範圍選擇
  3. 測試環境設定
- **理由**: 確保測試符合專案規範

---

## 驗收標準

### 階段一驗收
- [ ] 所有參考文件（6 個）已建立
- [ ] 參考文件內容正確反映 CLAUDE.md 的規範
- [ ] 文件使用繁體中文撰寫

### 階段二驗收
- [ ] 所有程式碼範本（6 個）已建立
- [ ] 範本符合專案規範（Result Pattern、DbContextFactory 等）
- [ ] 範本包含清晰的註解說明

### 階段三驗收
- [ ] 所有核心 Skills（9 個）已建立
- [ ] Skills 正確引用參考文件與範本
- [ ] Skills 職責單一明確

### 階段四驗收
- [ ] 所有核心 Agents（3 個）已建立
- [ ] Agents 正確串接 Skills
- [ ] Agents 包含明確的互動點

---

## 總計

- **參考文件**: 6 個
- **程式碼範本**: 6 個
- **Skills**: 9 個
- **Agents**: 3 個
- **總檔案數**: 24 個

---

## 注意事項

1. 所有檔案使用**台灣用語的繁體中文**撰寫
2. 遵循 CLAUDE.md 的核心原則與規範
3. Skill 保持職責單一，透過 Agent 編排工作流程
4. 程式碼範本需包含清晰註解與最佳實踐說明
5. Agent 需設計明確的互動點，避免擅自假設用戶選擇
