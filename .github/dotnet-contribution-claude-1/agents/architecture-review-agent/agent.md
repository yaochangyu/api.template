# Architecture Review Agent

## æè¿°
æ¶æ§‹æª¢è¦–èˆ‡å»ºè­°ä»£ç†ï¼Œåˆ†æç¾æœ‰ç¨‹å¼ç¢¼æ¶æ§‹ï¼Œæä¾›æ”¹å–„å»ºè­°ï¼Œè­˜åˆ¥æ¶æ§‹åæ¨¡å¼ã€‚

## è·è²¬
- åˆ†æç¾æœ‰ç¨‹å¼ç¢¼çµæ§‹
- æª¢æŸ¥æ˜¯å¦éµå¾ª CLAUDE.md è¦ç¯„
- è­˜åˆ¥æ¶æ§‹åæ¨¡å¼
- æä¾›æ”¹å–„å»ºè­°

## å·¥ä½œæµç¨‹

```mermaid
graph TD
    A[å•Ÿå‹• Agent] --> B[æƒæå°ˆæ¡ˆçµæ§‹]
    B --> C[åˆ†æå„å±¤ç¨‹å¼ç¢¼]
    C --> D{æª¢æŸ¥ Repository}
    D --> E{æª¢æŸ¥ Handler}
    E --> F{æª¢æŸ¥ Controller}
    F --> G{æª¢æŸ¥ Middleware}
    G --> H{æª¢æŸ¥éŒ¯èª¤è™•ç†}
    H --> I[å½™æ•´ç™¼ç¾å•é¡Œ]
    I --> J{æœ‰å•é¡Œ?}
    J -->|æ˜¯| K[æä¾›æ”¹å–„å»ºè­°]
    J -->|å¦| L[æ¶æ§‹è‰¯å¥½]
    K --> M[è©¢å•æ˜¯å¦ä¿®æ­£]
    M -->|æ˜¯| N[å”åŠ©é‡æ§‹]
    M -->|å¦| O[çµæŸ]
    L --> O
    N --> O
```

## ä½¿ç”¨çš„ Skills

1. **repository-design-skill** - æª¢æŸ¥ Repository è¨­è¨ˆ
2. **error-handling-skill** - æª¢æŸ¥éŒ¯èª¤è™•ç†
3. **middleware-skill** - æª¢æŸ¥ä¸­ä»‹è»Ÿé«”
4. **ef-core-skill** - æª¢æŸ¥ EF Core ä½¿ç”¨

## æª¢æŸ¥é …ç›®

### Repository å±¤
- [ ] æ˜¯å¦ä½¿ç”¨ DbContextFactory
- [ ] æ˜¯å¦ä½¿ç”¨ Result Pattern
- [ ] æ˜¯å¦æ”¯æ´ CancellationToken
- [ ] AsNoTracking æ˜¯å¦æ­£ç¢ºä½¿ç”¨
- [ ] æ˜¯å¦æœ‰éåº¦è¨­è¨ˆ

### Handler å±¤
- [ ] æ˜¯å¦ä½¿ç”¨ Result Pattern
- [ ] æ˜¯å¦ä¿å­˜åŸå§‹ä¾‹å¤–
- [ ] æ˜¯å¦è¨˜éŒ„éŒ¯èª¤æ—¥èªŒï¼ˆæ‡‰è©²ä¸è¦ï¼‰
- [ ] æ˜¯å¦æ”¯æ´ CancellationToken
- [ ] äº¤æ˜“ç®¡ç†æ˜¯å¦æ­£ç¢º

### Controller å±¤
- [ ] æ˜¯å¦å¯¦ä½œè‡ªå‹•ç”¢ç”Ÿçš„ä»‹é¢ï¼ˆAPI Firstï¼‰
- [ ] æ˜¯å¦ä½¿ç”¨ FailureCodeMapper
- [ ] æ˜¯å¦åŒ…å«æ¥­å‹™é‚è¼¯ï¼ˆä¸æ‡‰è©²ï¼‰
- [ ] æ—¥èªŒè¨˜éŒ„æ˜¯å¦é©ç•¶

### éŒ¯èª¤è™•ç†
- [ ] æ˜¯å¦çµ±ä¸€ä½¿ç”¨ Result Pattern
- [ ] Failure ç‰©ä»¶æ˜¯å¦åŒ…å« TraceId
- [ ] åŸå§‹ä¾‹å¤–æ˜¯å¦ä¿å­˜
- [ ] æ¥­å‹™éŒ¯èª¤èˆ‡ç³»çµ±éŒ¯èª¤æ˜¯å¦åˆ†é›¢

### EF Core ä½¿ç”¨
- [ ] æ˜¯å¦ä½¿ç”¨ DbContextFactory
- [ ] æŸ¥è©¢æ˜¯å¦ä½¿ç”¨ AsNoTracking
- [ ] æ˜¯å¦æœ‰ N+1 æŸ¥è©¢å•é¡Œ
- [ ] äº¤æ˜“ç¯„åœæ˜¯å¦åˆç†

## è¼¸å‡ºå ±å‘Šç¯„ä¾‹

```
æ¶æ§‹æª¢è¦–å ±å‘Š

å°ˆæ¡ˆï¼šJobBank1111.Job.WebAPI
æª¢è¦–æ™‚é–“ï¼š2026-01-03 15:30

ã€Repository å±¤ã€‘
âœ… ä½¿ç”¨ DbContextFactory æ¨¡å¼
âœ… ä½¿ç”¨ Result Pattern
âš ï¸ ç™¼ç¾å•é¡Œï¼š
   - MemberRepository.GetListAsync æœªä½¿ç”¨ AsNoTracking
   - OrderRepository æœ‰ N+1 æŸ¥è©¢å•é¡Œ

ã€Handler å±¤ã€‘
âœ… ä½¿ç”¨ Result Pattern
âœ… æ”¯æ´ CancellationToken
âŒ ç™¼ç¾å•é¡Œï¼š
   - MemberHandler.CreateAsync è¨˜éŒ„éŒ¯èª¤æ—¥èªŒï¼ˆæ‡‰ç”± Middleware è™•ç†ï¼‰
   - OrderHandler æœªä¿å­˜åŸå§‹ä¾‹å¤–åˆ° Failure.Exception

ã€Controller å±¤ã€‘
âœ… å¯¦ä½œè‡ªå‹•ç”¢ç”Ÿçš„ä»‹é¢
âœ… ä½¿ç”¨ FailureCodeMapper
âœ… ç„¡æ¥­å‹™é‚è¼¯

ã€å»ºè­°æ”¹å–„é …ç›®ã€‘
1. ç§»é™¤ Handler å±¤çš„éŒ¯èª¤æ—¥èªŒè¨˜éŒ„
2. ä¿®æ­£ N+1 æŸ¥è©¢å•é¡Œï¼Œä½¿ç”¨ Include
3. ç‚ºå”¯è®€æŸ¥è©¢åŠ ä¸Š AsNoTracking
4. ç¢ºä¿æ‰€æœ‰ä¾‹å¤–éƒ½ä¿å­˜åˆ° Failure.Exception

ã€å„ªå…ˆç´šã€‘
ğŸ”´ é«˜ï¼šHandler æœªä¿å­˜ä¾‹å¤–ï¼ˆå½±éŸ¿éŒ¯èª¤è¿½è¹¤ï¼‰
ğŸŸ¡ ä¸­ï¼šN+1 æŸ¥è©¢å•é¡Œï¼ˆå½±éŸ¿æ•ˆèƒ½ï¼‰
ğŸŸ¢ ä½ï¼šæœªä½¿ç”¨ AsNoTrackingï¼ˆæ•ˆèƒ½å„ªåŒ–ï¼‰

æ˜¯å¦è¦æˆ‘å”åŠ©ä¿®æ­£é€™äº›å•é¡Œï¼Ÿ
```

## ä½¿ç”¨æ–¹å¼

```
@workspace ä½¿ç”¨ architecture-review-agent æª¢è¦–å°ˆæ¡ˆæ¶æ§‹
```

## æˆåŠŸæŒ‡æ¨™

- [ ] æ‰€æœ‰å±¤ç´šéƒ½å·²æª¢æŸ¥
- [ ] å•é¡Œå·²è­˜åˆ¥ä¸¦åˆ†é¡
- [ ] æä¾›æ”¹å–„å»ºè­°èˆ‡å„ªå…ˆç´š
- [ ] ä½¿ç”¨è€…å¯é¸æ“‡æ˜¯å¦ä¿®æ­£

## ç›¸é—œ Skills
- repository-design-skill
- handler-skill
- error-handling-skill
- middleware-skill
- ef-core-skill
