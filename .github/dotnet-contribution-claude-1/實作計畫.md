# GitHub Copilot Skills & Agents 實作計畫

## 目標
根據 CLAUDE.md 建立一套完整的 GitHub Copilot skill 和 agent 系統，協助開發者進行 ASP.NET Core Web API 開發。

## 資料夾結構規劃

```
.github/dotnet-contribution-claude-1/
├── 實作計畫.md                          # 本檔案
├── 實作計畫.Progress.md                 # 進度追蹤檔案
├── skills/                              # Skills 目錄
│   ├── project-init/                    # 專案初始化 skill
│   ├── api-design/                      # API 設計 skill
│   ├── testing-strategy/                # 測試策略 skill
│   ├── controller-impl/                 # Controller 實作 skill
│   ├── handler-impl/                    # Handler 實作 skill
│   ├── repository-impl/                 # Repository 實作 skill
│   ├── middleware-impl/                 # 中介軟體實作 skill
│   └── error-handling/                  # 錯誤處理 skill
├── agents/                              # Agents 目錄
│   ├── dotnet-api-developer/            # 主要開發 agent
│   └── testing-engineer/                # 測試工程師 agent
├── references/                          # 參考文件目錄
│   ├── architecture-patterns.md         # 架構模式參考
│   ├── repository-pattern.md            # Repository Pattern 參考
│   ├── result-pattern.md                # Result Pattern 參考
│   ├── bdd-testing.md                   # BDD 測試參考
│   ├── middleware-pipeline.md           # 中介軟體管線參考
│   ├── ef-core-best-practices.md        # EF Core 最佳實踐
│   └── api-first-workflow.md            # API First 工作流程參考
└── assets/                              # 程式碼模板目錄
    ├── controller-template.cs           # Controller 模板
    ├── handler-template.cs              # Handler 模板
    ├── repository-template.cs           # Repository 模板
    ├── middleware-template.cs           # 中介軟體模板
    ├── failure-template.cs              # Failure 模板
    └── feature-template.feature         # BDD Feature 模板
```

## 實作步驟

### Phase 1: 建立參考文件 (References)

#### ☐ 步驟 1.1: 建立 architecture-patterns.md
**目的**: 提供分層架構、Controller/Handler/Repository 模式的參考文件
**原因**: 這是整個專案的核心架構概念，所有 skill 都需要參考此文件以確保架構一致性

#### ☐ 步驟 1.2: 建立 repository-pattern.md
**目的**: 詳細說明 Repository Pattern 的設計哲學（資料表導向 vs 需求導向）
**原因**: Repository 設計是專案的關鍵決策點，需要單獨文件說明設計策略與決策標準

#### ☐ 步驟 1.3: 建立 result-pattern.md
**目的**: 說明 Result Pattern 的使用方式、Failure 物件結構、錯誤處理策略
**原因**: 錯誤處理是跨層關注點，需要統一的參考文件確保一致性

#### ☐ 步驟 1.4: 建立 bdd-testing.md
**目的**: 說明 BDD 開發流程、Gherkin 語法、測試策略
**原因**: 測試是開發流程的重要環節，需要明確的指引文件

#### ☐ 步驟 1.5: 建立 middleware-pipeline.md
**目的**: 說明中介軟體管線順序、職責分離原則
**原因**: 中介軟體順序和職責劃分需要明確文件避免混淆

#### ☐ 步驟 1.6: 建立 ef-core-best-practices.md
**目的**: 說明 EF Core 查詢最佳化、DbContextFactory 使用
**原因**: EF Core 使用有許多最佳實踐需要遵循

#### ☐ 步驟 1.7: 建立 api-first-workflow.md
**目的**: 說明 API First vs Code First 工作流程、OpenAPI 規格定義
**原因**: API 開發流程選擇是重要決策點，需要詳細說明

### Phase 2: 建立程式碼模板 (Assets)

#### ☐ 步驟 2.1: 建立 controller-template.cs
**目的**: 提供 Controller 層的程式碼模板
**原因**: 確保 Controller 實作符合專案規範（主建構函式注入、Result Pattern 轉換）

#### ☐ 步驟 2.2: 建立 handler-template.cs
**目的**: 提供 Handler 層的程式碼模板
**原因**: 統一業務邏輯層的實作模式（Result Pattern、CancellationToken）

#### ☐ 步驟 2.3: 建立 repository-template.cs
**目的**: 提供 Repository 層的程式碼模板
**原因**: 統一資料存取層的實作模式（DbContextFactory、AsNoTracking）

#### ☐ 步驟 2.4: 建立 middleware-template.cs
**目的**: 提供中介軟體的程式碼模板
**原因**: 確保中介軟體實作符合管線架構規範

#### ☐ 步驟 2.5: 建立 failure-template.cs
**目的**: 提供 Failure 物件的程式碼模板
**原因**: 統一錯誤處理的資料結構

#### ☐ 步驟 2.6: 建立 feature-template.feature
**目的**: 提供 BDD Feature 檔案的模板
**原因**: 統一 Gherkin 語法的撰寫格式

### Phase 3: 建立 Skills

#### ☐ 步驟 3.1: 建立 project-init skill
**目的**: 處理專案初始化檢測、配置檔案產生、GitHub 範本套用
**原因**: 專案初始化是開發的第一步，需要獨立的 skill 處理檢測與配置邏輯
**參考**: architecture-patterns.md

#### ☐ 步驟 3.2: 建立 api-design skill
**目的**: 協助定義 OpenAPI 規格、產生 Server/Client 程式碼
**原因**: API 設計是開發流程的核心，需要專門的 skill 處理 API First 流程
**參考**: api-first-workflow.md

#### ☐ 步驟 3.3: 建立 testing-strategy skill
**目的**: 詢問測試策略、產生 BDD Feature 檔案、設定測試環境
**原因**: 測試策略決策需要與使用者互動，需要專門的 skill 處理
**參考**: bdd-testing.md

#### ☐ 步驟 3.4: 建立 controller-impl skill
**目的**: 實作 Controller 層，整合 Handler、處理 Result Pattern 轉換
**原因**: Controller 實作有固定模式，可以用 skill 自動產生
**參考**: architecture-patterns.md, result-pattern.md
**模板**: controller-template.cs

#### ☐ 步驟 3.5: 建立 handler-impl skill
**目的**: 實作 Handler 層業務邏輯、錯誤處理
**原因**: Handler 層是業務邏輯核心，需要專門的 skill 確保最佳實踐
**參考**: architecture-patterns.md, result-pattern.md
**模板**: handler-template.cs

#### ☐ 步驟 3.6: 建立 repository-impl skill
**目的**: 實作 Repository 層資料存取邏輯、決策 Repository 設計策略
**原因**: Repository 設計有多種策略，需要專門的 skill 協助決策與實作
**參考**: repository-pattern.md, ef-core-best-practices.md
**模板**: repository-template.cs

#### ☐ 步驟 3.7: 建立 middleware-impl skill
**目的**: 實作中介軟體、確保管線順序正確
**原因**: 中介軟體實作需要遵循管線架構，需要專門的 skill 確保正確性
**參考**: middleware-pipeline.md
**模板**: middleware-template.cs

#### ☐ 步驟 3.8: 建立 error-handling skill
**目的**: 實作 Failure 物件、FailureCode 列舉、FailureCodeMapper
**原因**: 錯誤處理是跨層關注點，需要專門的 skill 確保一致性
**參考**: result-pattern.md
**模板**: failure-template.cs

### Phase 4: 建立 Agents

#### ☐ 步驟 4.1: 建立 dotnet-api-developer agent
**目的**: 整合所有 skill，提供完整的 API 開發工作流程
**原因**: 需要一個主要的 agent 協調所有 skill，引導使用者完成開發任務
**使用 skills**:
- project-init
- api-design
- testing-strategy
- controller-impl
- handler-impl
- repository-impl
- error-handling

#### ☐ 步驟 4.2: 建立 testing-engineer agent
**目的**: 專門處理測試相關任務（BDD Feature 撰寫、測試步驟實作、測試環境設定）
**原因**: 測試工程需要專業知識，需要專門的 agent 提供深度支援
**使用 skills**:
- testing-strategy
- bdd-testing

### Phase 5: 建立說明文件

#### ☐ 步驟 5.1: 建立 README.md
**目的**: 提供整體說明、使用方式、架構概覽
**原因**: 使用者需要快速了解如何使用這套 skill 和 agent 系統

#### ☐ 步驟 5.2: 建立 SKILLS.md
**目的**: 詳細說明每個 skill 的功能、使用方式、參數
**原因**: 使用者需要了解每個 skill 的詳細功能

#### ☐ 步驟 5.3: 建立 AGENTS.md
**目的**: 詳細說明每個 agent 的功能、工作流程
**原因**: 使用者需要了解每個 agent 的使用情境

## 實作原則

1. **單一職責**: 每個 skill 只負責一個明確的功能
2. **參考分離**: skill 不直接包含大量說明，而是參考 references 資料夾的文件
3. **模板驅動**: 使用 assets 資料夾的模板確保程式碼一致性
4. **互動優先**: agent 必須與使用者互動，不可擅自假設
5. **繁體中文**: 所有文件和互動使用台灣用語的繁體中文

## 預期成果

完成後，開發者可以：
1. 使用 `dotnet-api-developer` agent 快速初始化專案
2. 透過互動式問答選擇 API 開發流程
3. 自動產生符合專案規範的 Controller/Handler/Repository 程式碼
4. 透過 `testing-engineer` agent 建立 BDD 測試
5. 所有產生的程式碼都符合 CLAUDE.md 的最佳實踐

---

**建立日期**: 2026-01-03
**預計完成**: Phase 1-5 全部完成
